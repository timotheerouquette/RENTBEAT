

<div class="container-studios">

  <div class="container-studios-title">
    <div id="all-studios">
      <h1>All studios </h1>
    </div>
    <div>
      <% if policy(Studio).create? %>
        <%= link_to "New studio", new_studio_path, class: "button" %>
      <% end %>
    </div>
  </div>
  <br>


  <div class="container-map">
    <div class="studios-separation">
      <div class="cards-index">
        <% @studios.each do |studio| %>
          <% if studio.user != current_user %>
            <div class="card-studio studios-card-placeholder">
              <div class="delete-button-placeholder">
                <% if policy(studio).destroy? %>
                  <%= link_to ('<i class="far fa-trash-alt"></i>').html_safe, studio_path(studio), method: :delete, data: { confirm: "Delete #{studio.title}?" }, class: "delete-button" %>
                <% end %>
              </div>

              <%= link_to studio_path(studio) do%>
                <div class="card-img-container">
                  <% if studio.photos.attached? %>
                    <%= cl_image_tag studio.photos.key, crop: :fill %>
                  <% else %>
                    <img src="https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2550&q=80" />
                  <% end %>
                </div>
              <% end %>

              <div class="card-studio-infos">
                <div>
                  <%= link_to studio.title, studio_path(studio) %>
                  <p> — <em><%= studio.address %></em> </p>
                </div>
                <div>
                  <p> <%= studio.capacity %> <i class="far fa-user"></i> </p>
                  <p class="price"> <strong><%= studio.price %>€ </strong></p>
                </div>

                <img src="https://kitt.lewagon.com/placeholder/users/krokrob" class="card-studio-user avatar-bordered" />
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
      <br>
      <br>
      <div class="cards-index">
        <% if current_user.studios.length !=0 %>
          <h1>My studios</h1>
        <% end %>
      </div>
      <br>
      <div class="cards-index">
        <% @studios.each do |studio| %>
          <% if studio.user == current_user %>
            <div class="card-studio studios-card-placeholder">
              <div class="delete-button-placeholder">
                <% if policy(studio).destroy? %>
                  <% if studio.bookings.length != 0%>
                    <a disabled="disabled" class="delete-button" id="sweet-alert-demo">
                      <i class="far fa-trash-alt"></i>
                    </a>
                  <% else %>
                    <%= link_to ('<i class="far fa-trash-alt"></i>').html_safe, studio_path(studio), method: :delete, data: { confirm: "Delete #{studio.title}?" }, class: "delete-button" %>
                  <% end %>
                <% end %>
              </div>
              <%= link_to studio_path(studio) do%>
                <div class="card-img-container">
                  <% if studio.photos.attached? %>
                      <%= cl_image_tag studio.photos.key, crop: :fill %>
                  <% else %>
                    <img src="https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2550&q=80" />
                  <% end %>
              </div>
              <% end %>

              <div class="card-studio-infos">
                <div>
                  <%= link_to studio.title, studio_path(studio) %>
                  <p> — <em><%= studio.address %></em> </p>
                </div>
                <div>
                  <p> <%= studio.capacity %> <i class="far fa-user"></i> </p>
                  <p class="price"> <strong><%= studio.price %>€ </strong></p>
                </div>

                <img src="https://kitt.lewagon.com/placeholder/users/krokrob" class="card-studio-user avatar-bordered" />
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>


    <div id="map"
      style="width: 100%; height: 600px;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>

  </div>

</div>
